# Description: Port of Webkit to FLTK 1.3.
# URL:         https://github.com/clbr/webkitfltk
# Maintainer:  fun, just.the.real.fun at gmail dot com
# Depends on:  fltk ruby gperf harfbuzz-icu

name=webkitfltk
version=0.5.1-fun.2
release=1
upstream=0.5.1

source=(
	https://github.com/therealfun/$name/archive/v$version/$name-$version.tar.gz
	.watch
)

build() {
	cd */
	CXXFLAGS=" -DNDEBUG"
	export MAKEFLAGS="-j ${JOBS:-$(nproc)} $MAKEFLAGS"
	ed -s Source/WebKit/fltk/Makefile <<-EOF
		/^NAME =/s@/tmp/@@
		w
	EOF
	make -C Source/bmalloc/bmalloc
	make -C Source/WTF/wtf
	make -C Source/JavaScriptCore   gen
	make -C Source/JavaScriptCore
	make -C Source/WebCore
	make -C Source/WebKit/fltk      install DESTDIR=$PKG
}
